name: Continuous Integration 
on: [push] 
jobs: 
 build: 
  name: Build and test 
  runs-on: ubuntu-latest 
  steps: 
  - uses: actions/checkout@v2 
  - run: docker build --target test --tag todo-app:test .
  - run: docker run -it --env-file .env.test --mount type=bind,source="$(pwd)"/todo_app,target=/todo-app/todo_app todo-app:test